{% if page !== 'history' %}
<td class="deploy" ng-hide="page === 'build'">
  <span ng-hide="job.running"
        ng-click="startDeploy(job)"
        data-toggle="tooltip" title="Retest &amp; Deploy"
        data-delay="200" class="clickable test-and-deploy-action">
    <i class="icon-cloud-upload"></i>
  </span>
</td>
{% endif %}
<td class="job-link" ng-switch="page==='build'">
  <a href="/[[ job.project.name ]]/[[ job.nojobs ? '' : 'job/' + job._id ]]" ng-switch-when="false" ng-switch="job.status">
    <i ng-switch-when="succeeded" class="icon-check-sign success-text"></i>
    <i ng-switch-when="running" class="icon-cog icon-spin"></i>
    <i ng-switch-when="submitted" class="icon-cog icon-spin"></i>
    <i ng-switch-when="failed" class="icon-exclamation-sign failure-text"></i>
    <span ng-switch-default>No job history</span>
    <span>[[ job._id.substr(0,8) ]]</span>
  </a>
  <span ng-switch-when="true" ng-switch="job.status">
    <i ng-switch-when="succeeded" class="icon-check-sign success-text"></i>
    <i ng-switch-when="running" class="icon-cog icon-spin"></i>
    <i ng-switch-when="submitted" class="icon-cog icon-spin"></i>
    <i ng-switch-when="failed" class="icon-exclamation-sign failure-text"></i>
    <span ng-switch-default>No job history</span>
    <span>[[ job._id.substr(0,8) ]]</span>
  </span>
</td>
{% if page !== 'history' %}
<td class="refresh" ng-hide="page === 'build'">
  <span ng-hide="job.running" data-toggle="tooltip"
        ng-click="startTest(job)"
        title="Retest" data-delay="500"
        class="clickable test-only-action">
    <i class="icon-refresh"></i>
  </span>
</td>
<td class="configure" ng-hide="page === 'build'">
  <a href="/[[ job.project.name ]]/config"
     data-toggle="tooltip" data-delay="500" title="Configure">
    <i class="icon-wrench"></i>
  </a>
</td>
<td class="project-name" ng-hide="page === 'build'">
  <a href="/[[ job.project.name ]]/">
    [[ job.project.name ]]
  </a>
</td>
<td class="history" ng-hide="page === 'build'">
  <table class='last-builds'>
    <tr>
      <td ng-repeat="pjob in job.project.prev" title="[[ pjob._id.slice(0,8) ]] [[ pjob.status ]]" class='build-[[ $index ]] status-[[ pjob.status ]]'></td>
    </tr>
  </table>
</td>
{% endif %}
<td class="committer">
  <div ng-show="job.trigger.author.image" ng-switch="!!job.trigger.author.url">
    <img ng-switch-when="false" ng-src="[[ job.trigger.author.image ]]"/>
    <a ng-switch-default href="[[ job.trigger.author.url ]]" target="_blank">
      <img ng-src="[[ job.trigger.author.image ]]"/>
    </a>
  </div>
</td>
{% if page !== 'history' %}
<td class="commit-url" ng-switch="!!job.trigger.url">
  <a href="[[ job.trigger.url ]]" ng-switch-when="true" target="_blank">
    <span class="small-text">
      <i class="trigger-icon icon-[[ triggers[job.trigger.type].icon ]]" data-toggle="tooltip" title="[[ triggers[job.trigger.type].title ]]"></i>
      [[ job.trigger.message ]]
    </span>
  </a>
  <span class="small-text" ng-switch-default>
    <i class="trigger-icon icon-[[ triggers[job.trigger.type].icon ]]" data-toggle="tooltip" title="[[ triggers[job.trigger.type].title ]]"></i>
    [[ job.trigger.message ]]
  </span>
</td>
<td class="github-link" ng-hide="page === 'build'">
  <a href="[[ job.project.display_url ]]" target="_blank">
    <i class="icon-github"></i>
  </a>
</td>
{% endif %}
<td class="run-time">
  <span class="small-text">
    [[ job.duration ? job.duration/1000 + 's' : '' ]]
  </span>
</td>
<td class="finished-at" ng-switch="!!job.running">
  <span ng-switch-when="false" class="small-text">
    <time data-toggle="tooltip" data-placement="top" datetime="[[ job.finished ]]" class="timeago"></time>
  </span>
  <div ng-switch-when="true" class="progress-meter">
    <div class="progress progress-striped active progress-info">
      <div class="bar" style="width:[[ job.time_elapsed/job.past_duration*100 ]]%; max-width: 100%"></div>
    </div>
  </div>
</td>
